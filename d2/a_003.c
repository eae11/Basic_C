#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <time.h>

void help(void) {
    printf("*************************\n");
    printf("* ?????????????\n");
    printf("* ????????????????\n");
    printf("* ??????????????,???????????????!\n");
    printf("* ???????????_???\n");
    printf("*************************\n");
}

int main() {
    char ch;
    char str[51] = "";//???????,????????????26???????  50??????????'\0'
    int i;
    int count;
    time_t start_time, end_time;
    while (1) {
        system("cls");
        help();
        fflush(stdout);
        ch = _getch();//??????????
        srand(time(NULL));
        for (int i = 0; i < 50; ++i) {
            str[i] = rand() % 26 + 'a';//???????????????26?????
        }
        str[50] = '\0';
        printf("%s\n", str);//?????????????????
        count = 0;
        for (int i = 0; i < 50; ++i) {
            ch = _getch();
            if (i == 0) {
                start_time = time(NULL);//?????????????????
            }
            if (ch == str[i]) {
                count++;
                printf("%c", ch);
            } else {
                printf("_");
            }

        }
        end_time = time(NULL);
        printf("\ncount=%d\n", count);
        printf("????? %d %c\n", count * 100 / 50, '%');
        printf("???%ld??\n", end_time - start_time);
        printf("????????????,??esc???\n");
        //?????????????????? ????????????,??esc???
        while (1) {

            ch = _getch();
            if (ch == ' ') {
                break;//??????????
            }
            if (ch == 27)//esc
            {
                return 0;
            }

        }

    }

    return 0;
}
